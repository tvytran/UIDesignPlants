{% extends "base.html" %}

{% block title %}{{ plant.name }} - PlantPal{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row mb-4 g-4 align-items-center">
        <div class="col-md-5 text-center">
            <img src="{{ url_for('static', filename='images/' + plant.image) }}" alt="{{ plant.name }}" 
                 class="img-fluid rounded-3 shadow-sm border" style="max-height: 400px; object-fit: cover;">
        </div>
        <div class="col-md-7">
            <h1 class="display-5 fw-bold text-success">{{ plant.name }}</h1>
            {% if plant.scientific_name %}
            <p class="text-muted mb-3 fst-italic">{{ plant.scientific_name }}</p>
            {% endif %}
            <p class="lead">{{ plant.description if plant.description else "A lovely houseplant. More details coming soon!" }}</p>
            {# You could add other quick info like difficulty, size etc. here #}
        </div>
    </div>

    <!-- Bootstrap Nav Tabs -->
    <ul class="nav nav-tabs mb-3" id="plantDetailTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview-tab-pane" type="button" role="tab" aria-controls="overview-tab-pane" aria-selected="true">Overview</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="lighting-tab" data-bs-toggle="tab" data-bs-target="#lighting-tab-pane" type="button" role="tab" aria-controls="lighting-tab-pane" aria-selected="false">ðŸ’¡ Lighting</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="facts-tab" data-bs-toggle="tab" data-bs-target="#facts-tab-pane" type="button" role="tab" aria-controls="facts-tab-pane" aria-selected="false">âœ¨ Facts</button>
        </li>
    </ul>

    <!-- Tab Content -->
    <div class="tab-content" id="plantDetailTabContent">
        <!-- Overview Tab -->
        <div class="tab-pane fade show active p-4 border border-top-0 rounded-bottom bg-white" id="overview-tab-pane" role="tabpanel" aria-labelledby="overview-tab" tabindex="0">
            <h3 class="mb-3">Care Guide</h3>
             <div class="row g-3">
                 <div class="col-md-6">
                    <h5><i class="bi bi-droplet-fill text-primary me-2"></i>Watering</h5>
                    <p>{{ plant.watering if plant.watering else "Watering information not available." }}</p>
                 </div>
                 <div class="col-md-6">
                     <h5><i class="bi bi-sun-fill text-warning me-2"></i>Sunlight</h5>
                    <p>{{ plant.sunlight if plant.sunlight else "Sunlight requirements information not available." }}</p>
                 </div>
                 {# Add more care sections like Soil, Temperature, Humidity if available in data #}
            </div>
        </div>

        <!-- Lighting Tab -->
        <div class="tab-pane fade p-4 border border-top-0 rounded-bottom bg-white" id="lighting-tab-pane" role="tabpanel" aria-labelledby="lighting-tab" tabindex="0">
             <h3 class="mb-3">Ideal Lighting Spot</h3>
              <p class="text-muted mb-4">
                    Based on its needs (<strong>{{ correct_zone.replace('-', ' ').title() if correct_zone else 'Unknown Zone' }}</strong>), 
                    find a similar spot for your {{ plant.name }} in your home.
                </p>
              <div class="text-center">
                 {# Simplified: Show the image and text, removed complex positioning #}
                 <img src="{{ url_for('static', filename='images/' + plant.image) }}" 
                      alt="{{ plant.name }} in suggested lighting" 
                      class="img-thumbnail mb-3" style="max-width: 200px;">
                 <p>Place in an area with <strong>{{ correct_zone.replace('-', ' ').title() if correct_zone else 'appropriate' }}</strong> light.</p>
                 {% if not correct_zone %}
                     <p class="text-danger small">Could not determine exact lighting zone.</p>
                 {% endif %}
             </div>
        </div>

        <!-- Facts Tab -->
        <div class="tab-pane fade p-4 border border-top-0 rounded-bottom bg-white" id="facts-tab-pane" role="tabpanel" aria-labelledby="facts-tab" tabindex="0">
            <h3 class="mb-3">Fun Facts!</h3>
             {% if plant.facts %}
                 <div class="list-group">
                     {% for fact in plant.facts %}
                         <div class="list-group-item list-group-item-action d-flex gap-3 py-3" aria-current="true">
                           <i class="bi bi-check-circle-fill text-success fs-4"></i>
                           <div class="d-flex gap-2 w-100 justify-content-between">
                             <div>
                               <p class="mb-0 opacity-75">{{ fact }}</p>
                             </div>
                           </div>
                         </div>
                     {% endfor %}
                 </div>
             {% else %}
                 <p class="text-muted italic">No fun facts available for this plant yet.</p>
             {% endif %}
        </div>
    </div>

    <!-- Back Link -->
    <div class="mt-4 text-center">
        <a href="{{ url_for('plants') }}" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left me-2"></i>Back to All Plants
        </a>
    </div>
</div>
{% endblock %}

{# Remove the old script block if it exists #}
{% block scripts %}{% endblock %}