{% extends "base.html" %}

{% block title %}{{ plant.name }} - Ideal Lighting{% endblock %}

{% block content %}
    <div class="text-center">
        <h1 class="text-2xl sm:text-3xl font-bold text-duo-text mb-2">{{ plant.name }} - Ideal Lighting Spot</h1>
        <p class="text-gray-500 mb-6 max-w-lg mx-auto">
            Based on its needs (<strong>{{ correct_zone.replace('-', ' ').title() if correct_zone else 'Unknown Zone' }}</strong>), 
            this is the ideal spot for your {{ plant.name }} in this room layout:
        </p>

        {# Define zone positions (approximated centers of quadrants for a 1:1 image) #}
        {# bright-indirect: Top-Left #}
        {# low-medium: Top-Right #}
        {# moderate-indirect: Bottom-Left #}
        {# bright-filtered: Bottom-Right #}
        {% set zone_styles = {
            'bright-indirect': 'top: 25%; left: 25%;',
            'low-medium': 'top: 25%; left: 75%;',
            'moderate-indirect': 'top: 75%; left: 25%;',
            'bright-filtered': 'top: 75%; left: 75%;'
        } %}
        
        {# Get the style for the correct zone, default to center if not found #}
        {% set position_style = zone_styles.get(correct_zone, 'top: 50%; left: 50%;') %}
        
        {# Container for the background image - Use 3:2 aspect ratio #}
        <div class="relative w-full max-w-xl mx-auto rounded-xl shadow-lg border border-gray-200 overflow-hidden" 
             style="padding-top: 66.66%; background-image: url('{{ url_for('static', filename='images/istockphoto-149468256-612x612.jpg') }}'); background-size: cover; background-position: center;"> 
            {# Using the specified image path #}
            {# padding-top: 66.66% creates 3:2 aspect ratio #}

            {# Position the plant image if correct_zone is known #}
            {% if correct_zone %}
            <img src="{{ url_for('static', filename='images/' + plant.image) }}" 
                 alt="{{ plant.name }} placed in its ideal lighting spot ({{ correct_zone.replace('-', ' ').title() }})"
                 title="Ideal Spot: {{ correct_zone.replace('-', ' ').title() }}"
                 class="absolute w-16 h-16 sm:w-20 sm:h-20 object-contain drop-shadow-lg transform -translate-x-1/2 -translate-y-1/2 border-2 border-white rounded-full shadow-xl"
                 style="{{ position_style }}">
            {% else %}
             {# Fallback message if zone is unknown #}
             <p class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-red-600 font-semibold bg-white/80 p-2 rounded">Could not determine correct lighting zone.</p>
            {% endif %}
        </div>

        <div class="mt-10">
            <a href="{{ url_for('plant_detail', plant_id=plant_id) }}" 
               class="inline-block text-gray-500 hover:text-duo-green font-semibold text-sm underline underline-offset-2">
               &larr; Back to {{ plant.name }} Details
            </a>
         </div>
    </div>
{% endblock %}